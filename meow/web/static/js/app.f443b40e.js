(function(){"use strict";var e={8350:function(e,a,l){var t=l(3592),n=l(3295);function s(e,a,l,t,s,i){const o=(0,n.g2)("HomePage");return(0,n.uX)(),(0,n.Wv)(o)}var i=l(4610);const o=(0,n.Lk)("div",null,[(0,n.Lk)("span",null,"音频设置")],-1),u=(0,n.Lk)("div",null,[(0,n.Lk)("span",null,"对话设置")],-1);function d(e,a,l,t,s,d){const r=(0,n.g2)("el-col"),m=(0,n.g2)("el-option"),p=(0,n.g2)("el-select"),c=(0,n.g2)("el-row"),f=(0,n.g2)("el-slider"),b=(0,n.g2)("el-card"),h=(0,n.g2)("el-input"),v=(0,n.g2)("el-button"),g=(0,n.g2)("el-container");return(0,n.uX)(),(0,n.Wv)(g,{class:"main-box"},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"row"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"col",span:24,lg:12},{default:(0,n.k6)((()=>[(0,n.bF)(b,{class:"box-card"},{header:(0,n.k6)((()=>[o])),default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"p-10"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"select-label",span:24,sm:6},{default:(0,n.k6)((()=>[(0,n.eW)("音色模型")])),_:1}),(0,n.bF)(r,{span:24,sm:18},{default:(0,n.k6)((()=>[(0,n.bF)(p,{onChange:a[0]||(a[0]=e=>d.confChange(3,0)),modelValue:s.selectDataList[0].value,"onUpdate:modelValue":a[1]||(a[1]=e=>s.selectDataList[0].value=e),class:"w-100",placeholder:"Select",size:"large"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.options,(e=>((0,n.uX)(),(0,n.Wv)(m,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.audioConfigList,((e,a)=>((0,n.uX)(),(0,n.Wv)(c,{key:a,class:"p-10"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"select-label",span:24,sm:6},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.label),1)])),_:2},1024),(0,n.bF)(r,{span:24,sm:18},{default:(0,n.k6)((()=>[(0,n.bF)(f,{onChange:e=>d.confChange(0,a),modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,min:e.min,max:e.max,class:"w-100",step:e.step,disabled:e.disabled,"show-stops":"","show-input":""},null,8,["onChange","modelValue","onUpdate:modelValue","min","max","step","disabled"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,n.bF)(r,{class:"col",span:24,lg:12},{default:(0,n.k6)((()=>[(0,n.bF)(b,{class:"box-card"},{header:(0,n.k6)((()=>[u])),default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.defaultPrompt,((e,a)=>((0,n.uX)(),(0,n.Wv)(c,{key:a,class:"p-10"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"select-label",span:24,sm:6},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.label),1)])),_:2},1024),(0,n.bF)(r,{span:24,sm:18},{default:(0,n.k6)((()=>[(0,n.bF)(h,{onChange:e=>d.confChange(2,a),modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,autosize:"",type:"textarea",placeholder:"Please input"},null,8,["onChange","modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)))),128)),(0,n.bF)(c,{class:"p-10"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"select-label",span:24,sm:6},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(s.model.label),1)])),_:1}),(0,n.bF)(r,{span:24,sm:18},{default:(0,n.k6)((()=>[(0,n.bF)(h,{modelValue:s.model.value,"onUpdate:modelValue":a[2]||(a[2]=e=>s.model.value=e),autosize:"",type:"textarea",placeholder:"Please input",disabled:""},null,8,["modelValue"])])),_:1})])),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.openaiConfigList,((e,a)=>((0,n.uX)(),(0,n.Wv)(c,{key:a,class:"p-10"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{class:"select-label",span:24,sm:6},{default:(0,n.k6)((()=>[(0,n.eW)((0,i.v_)(e.label),1)])),_:2},1024),(0,n.bF)(r,{span:24,sm:18},{default:(0,n.k6)((()=>[(0,n.bF)(f,{onChange:e=>d.confChange(1,a),modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,min:e.min,max:e.max,class:"w-100",step:e.step,disabled:e.disabled,"show-stops":"","show-input":""},null,8,["onChange","modelValue","onUpdate:modelValue","min","max","step","disabled"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,n.bF)(b,{style:{"margin-top":"20px"},class:"box-card"},{header:(0,n.k6)((()=>[(0,n.Lk)("div",null,[(0,n.Lk)("span",null,"状态检测: "+(0,i.v_)(s.status_txt),1)])])),default:(0,n.k6)((()=>[(0,n.bF)(v,{class:"button",type:"danger",disabled:!s.chatStatus,onClick:d.stopChat,plain:""},{default:(0,n.k6)((()=>[(0,n.eW)("关闭对话")])),_:1},8,["disabled","onClick"]),(0,n.bF)(v,{class:"button",type:"primary",disabled:s.chatStatus,onClick:d.startChat,plain:""},{default:(0,n.k6)((()=>[(0,n.eW)("启动对话")])),_:1},8,["disabled","onClick"]),(0,n.bF)(v,{class:"button",type:"primary",disabled:s.chatStatus,onClick:d.clearChat,plain:""},{default:(0,n.k6)((()=>[(0,n.eW)("清除记忆")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1})])),_:1})])),_:1})}var r=l(1434),m=l(548),p={data(){return{options:[{value:1,label:"[百度]度小宇"},{value:0,label:"[百度]度小美"},{value:3,label:"[百度]度逍遥（基础）"},{value:4,label:"[百度]度丫丫"},{value:5003,label:"[百度]度逍遥（精品）"},{value:5118,label:"[百度]度小鹿"},{value:111,label:"[百度]度小萌"},{value:103,label:"[百度]度米朵"},{value:5,label:"[百度]度小娇"},{value:10001,label:"[VIST]纳西妲(不支持该设备)"}],audioConfigList:[{label:"触发阈值",min:1e3,max:5e4,value:1e3,step:500,handler:"audio",name:"audio_min_rms",disabled:!1},{label:"次数阈值",min:1,max:20,value:3,handler:"audio",name:"max_high_audio_flag",disabled:!1},{label:"忽略阈值",min:1,max:50,value:10,handler:"audio",name:"max_low_audio_flag",disabled:!1},{label:"音调",min:1,max:10,value:1,handler:"baidu",name:"pit",disabled:!1},{label:"语速",min:1,max:10,value:1,handler:"baidu",name:"spd",disabled:!1},{label:"音量",min:1,max:10,value:1,handler:"baidu",name:"vol",disabled:!1}],defaultPrompt:[{label:"人设",value:"",handler:"oneapi",name:"default_prompt",disabled:!1}],openaiConfigList:[{label:"提交最大长度",min:128,max:1024,value:256,handler:"oneapi",name:"max_prompt_length",disabled:!1},{label:"最大回复长度",min:12,max:256,value:128,handler:"oneapi",name:"ai_params",disabled:!1},{label:"对话温度",min:0,max:1,value:.6,step:.1,handler:"oneapi",name:"ai_params",disabled:!1}],selectDataList:[{value:4,handler:"baidu",name:"per",disabled:!1}],model:{label:"模型",value:"ERNIE-3.5-8K"},status_txt:"",chatStatus:!1,lastMsg:""}},mounted(){this.initConfig(),this.timer=setInterval(this.get_status,1e3)},beforeUnmount(){clearInterval(this.timer)},methods:{startChat(){r.A.get("/start_chat").then((e=>{200===e.status&&(0,m.df)({title:"启动",message:(0,n.h)("i",{style:"color: teal"},"已发送启动命令")})}))},stopChat(){r.A.get("/stop_chat").then((e=>{200===e.status&&(0,m.df)({title:"停止",message:(0,n.h)("i",{style:"color: teal"},"已发送停止命令")})}))},clearChat(){r.A.get("/clear_chat").then((e=>{200===e.status&&(0,m.df)({title:"清除",message:(0,n.h)("i",{style:"color: teal"},"已发送清除命令")})}))},get_status(){r.A.get("/chat_status").then((e=>{if(console.log(e.data),0===e.data["status"]?(this.status_txt="运行",this.chatStatus=!0):(this.status_txt="停止",this.chatStatus=!1),""!==e.data["msg"]){if(e.data["msg"]===this.lastMsg)return;this.lastMsg=e.data["msg"],"你"===e.data["msg"][0]?(0,m.df)({title:"你说",message:(0,n.h)("i",{style:"color: CornflowerBlue"},e.data["msg"].slice(3))}):"猫"===e.data["msg"][0]&&(0,m.df)({title:"猫猫说",message:(0,n.h)("i",{style:"color: OliveDrab"},e.data["msg"].slice(4))})}}))},initConfig(){r.A.get("/get_config").then((e=>{console.log(e.data);let a=e.data,l=a["audio"];this.audioConfigList[0].value=l["audio_min_rms"],this.audioConfigList[1].value=l["max_high_audio_flag"],this.audioConfigList[2].value=l["max_low_audio_flag"];let t=a["baidu"];this.audioConfigList[3].value=t["pit"],this.audioConfigList[4].value=t["spd"],this.audioConfigList[5].value=t["vol"],this.value=t["per"];let n=a["oneapi"];this.defaultPrompt[0].value=n["default_prompt"],this.openaiConfigList[0].value=n["max_prompt_length"],this.openaiConfigList[1].value=n["ai_params"]["max_tokens"],this.openaiConfigList[2].value=n["ai_params"]["temperature"]}))},confChange(e,a){let l=[];l=0===e?this.audioConfigList:1===e?this.openaiConfigList:2===e?this.defaultPrompt:this.selectDataList,l[a].disabled=!0;let t=l[a].handler,n=l[a].name,s=l[a].value;"ai_params"===n&&(s={frequency_penalty:1,model:this.model.value,presence_penalty:1,max_tokens:this.openaiConfigList[1].value,temperature:this.openaiConfigList[2].value,top_p:1}),r.A.post("/set_config",{handler:t,name:n,value:s}).then((e=>{l[a].disabled=!1,console.log(e.data)}))}}},c=l(2460);const f=(0,c.A)(p,[["render",d]]);var b=f,h={name:"App",components:{HomePage:b}};const v=(0,c.A)(h,[["render",s]]);var g=v,_=l(7451);l(6376);const k=(0,t.Ef)(g);k.use(_.A),k.mount("#app")}},a={};function l(t){var n=a[t];if(void 0!==n)return n.exports;var s=a[t]={exports:{}};return e[t].call(s.exports,s,s.exports,l),s.exports}l.m=e,function(){var e=[];l.O=function(a,t,n,s){if(!t){var i=1/0;for(r=0;r<e.length;r++){t=e[r][0],n=e[r][1],s=e[r][2];for(var o=!0,u=0;u<t.length;u++)(!1&s||i>=s)&&Object.keys(l.O).every((function(e){return l.O[e](t[u])}))?t.splice(u--,1):(o=!1,s<i&&(i=s));if(o){e.splice(r--,1);var d=n();void 0!==d&&(a=d)}}return a}s=s||0;for(var r=e.length;r>0&&e[r-1][2]>s;r--)e[r]=e[r-1];e[r]=[t,n,s]}}(),function(){l.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(a,{a:a}),a}}(),function(){l.d=function(e,a){for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};l.O.j=function(a){return 0===e[a]};var a=function(a,t){var n,s,i=t[0],o=t[1],u=t[2],d=0;if(i.some((function(a){return 0!==e[a]}))){for(n in o)l.o(o,n)&&(l.m[n]=o[n]);if(u)var r=u(l)}for(a&&a(t);d<i.length;d++)s=i[d],l.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return l.O(r)},t=self["webpackChunkchatmeowui"]=self["webpackChunkchatmeowui"]||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))}();var t=l.O(void 0,[504],(function(){return l(8350)}));t=l.O(t)})();
//# sourceMappingURL=app.f443b40e.js.map